<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Tutorials, Explanations, Exercises, Solutions, Workflows referring to Coding and Sciences"><link href=https://lyrahgames.github.io/codeflow/programming/c%2B%2B/course/12/ rel=canonical><meta name=author content="Markus Pawellek"><link rel="shortcut icon" href=../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.4.0"><title>12. Monte-Carlo π - Codeflow</title><link rel=stylesheet href=../../../../assets/stylesheets/main.fe0cca5b.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.a46bcfb3.min.css><meta name=theme-color content><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#12-monte-carlo class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://lyrahgames.github.io/codeflow title=Codeflow class="md-header-nav__button md-logo" aria-label=Codeflow> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Codeflow </span> <span class="md-header-nav__topic md-ellipsis"> 12. Monte-Carlo π </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/lyrahgames/codeflow/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> lyrahgames/codeflow </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../advanced_project/ class="md-tabs__link md-tabs__link--active"> Programming </a> </li> <li class=md-tabs__item> <a href=../../../../server/nextcloud_with_nginx_reverse_proxy/ class=md-tabs__link> Server </a> </li> <li class=md-tabs__item> <a href=../../../../developer/generate_the_documentation/ class=md-tabs__link> For Codeflow Developers </a> </li> <li class=md-tabs__item> <a href=../../../../about/authors/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../../mathematics/exercises/cardinal_number_of_finite_power_set/ class=md-tabs__link> Mathematics </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://lyrahgames.github.io/codeflow title=Codeflow class="md-nav__button md-logo" aria-label=Codeflow> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Codeflow </label> <div class=md-nav__source> <a href=https://github.com/lyrahgames/codeflow/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> lyrahgames/codeflow </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Programming <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Programming data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Programming </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced_project/ title="Advanced Project" class=md-nav__link> Advanced Project </a> </li> <li class=md-nav__item> <a href=../../../basic_toolchain/ title="Basic Toolchain" class=md-nav__link> Basic Toolchain </a> </li> <li class=md-nav__item> <a href=../../../common_toolchain/ title="Common Toolchain" class=md-nav__link> Common Toolchain </a> </li> <li class=md-nav__item> <a href=../../../community_files/ title="Community Files" class=md-nav__link> Community Files </a> </li> <li class=md-nav__item> <a href=../../../documentation/ title="Creating a Documentation for your Project" class=md-nav__link> Creating a Documentation for your Project </a> </li> <li class=md-nav__item> <a href=../../../git_basics/ title="Git Basics" class=md-nav__link> Git Basics </a> </li> <li class=md-nav__item> <a href=../../../licensing/ title="Licensing a Repository" class=md-nav__link> Licensing a Repository </a> </li> <li class=md-nav__item> <a href=../../../linux_development_environment/ title="Development Environment" class=md-nav__link> Development Environment </a> </li> <li class=md-nav__item> <a href=../../../mkdocs_and_gh_pages_workflow/ title="MkDocs and GitHub Pages Workflow" class=md-nav__link> MkDocs and GitHub Pages Workflow </a> </li> <li class=md-nav__item> <a href=../../../windows_development_environment/ title="Development on Windows" class=md-nav__link> Development on Windows </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-11 type=checkbox id=nav-2-11 checked> <label class=md-nav__link for=nav-2-11> C++ <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=C++ data-md-level=2> <label class=md-nav__title for=nav-2-11> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../clang_format_force_newlines/ title="Forcing Newlines while using clang-format" class=md-nav__link> Forcing Newlines while using clang-format </a> </li> <li class=md-nav__item> <a href=../../cmake_taming_the_beast/ title="CMake: Taming the Beast" class=md-nav__link> CMake: Taming the Beast </a> </li> <li class=md-nav__item> <a href=../../hello_world/ title="Hello, World!" class=md-nav__link> Hello, World! </a> </li> <li class=md-nav__item> <a href=../../project_start/ title="Starting a simple project in C++" class=md-nav__link> Starting a simple project in C++ </a> </li> <li class=md-nav__item> <a href=../../project_structure/ title="C++ Project Structures" class=md-nav__link> C++ Project Structures </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-11-6 type=checkbox id=nav-2-11-6 checked> <label class=md-nav__link for=nav-2-11-6> Course Lectures <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Course Lectures" data-md-level=3> <label class=md-nav__title for=nav-2-11-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Course Lectures </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../00/ title="0. Preliminaries" class=md-nav__link> 0. Preliminaries </a> </li> <li class=md-nav__item> <a href=../01/ title="1. Hello, World!" class=md-nav__link> 1. Hello, World! </a> </li> <li class=md-nav__item> <a href=../02/ title="2. Building Blocks" class=md-nav__link> 2. Building Blocks </a> </li> <li class=md-nav__item> <a href=../03/ title="3. Editor Configuration" class=md-nav__link> 3. Editor Configuration </a> </li> <li class=md-nav__item> <a href=../04/ title="4. Multiple Files" class=md-nav__link> 4. Multiple Files </a> </li> <li class=md-nav__item> <a href=../05/ title="5. The Compilation Process" class=md-nav__link> 5. The Compilation Process </a> </li> <li class=md-nav__item> <a href=../06/ title="6. Greatest Common Divisor" class=md-nav__link> 6. Greatest Common Divisor </a> </li> <li class=md-nav__item> <a href=../07/ title="7. Rational Structure" class=md-nav__link> 7. Rational Structure </a> </li> <li class=md-nav__item> <a href=../08/ title="8. Starting with Graphics" class=md-nav__link> 8. Starting with Graphics </a> </li> <li class=md-nav__item> <a href=../09/ title="9. Build System Basics" class=md-nav__link> 9. Build System Basics </a> </li> <li class=md-nav__item> <a href=../10/ title="10. Version Control" class=md-nav__link> 10. Version Control </a> </li> <li class=md-nav__item> <a href=../11/ title="11. GitHub as Git Hosting Platform" class=md-nav__link> 11. GitHub as Git Hosting Platform </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 12. Monte-Carlo π <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="12. Monte-Carlo π" class="md-nav__link md-nav__link--active"> 12. Monte-Carlo π </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#random-numbers-and-the-estimation-of class=md-nav__link> Random Numbers and the Estimation of π </a> </li> <li class=md-nav__item> <a href=#starting-a-new-project-with-other-tools-in-mind class=md-nav__link> Starting a New Project with Other Tools in Mind </a> </li> <li class=md-nav__item> <a href=#lambda-expression-as-simplification class=md-nav__link> Lambda Expression as Simplification </a> </li> <li class=md-nav__item> <a href=#estimating class=md-nav__link> Estimating π </a> </li> <li class=md-nav__item> <a href=#tweaking-the-program class=md-nav__link> Tweaking the Program </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Server <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Server data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../server/nextcloud_with_nginx_reverse_proxy/ title="Set Up Nextcloud with NGINX Reverse Proxy" class=md-nav__link> Set Up Nextcloud with NGINX Reverse Proxy </a> </li> <li class=md-nav__item> <a href=../../../../server/self_hosting/ title="Set up a Self-Hosted Server" class=md-nav__link> Set up a Self-Hosted Server </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> For Codeflow Developers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="For Codeflow Developers" data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> For Codeflow Developers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../developer/generate_the_documentation/ title="Generate the Documentation" class=md-nav__link> Generate the Documentation </a> </li> <li class=md-nav__item> <a href=../../../../developer/mkdocs_start/ title="Welcome to MkDocs" class=md-nav__link> Welcome to MkDocs </a> </li> <li class=md-nav__item> <a href=../../../../developer/test/ title=Test class=md-nav__link> Test </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> About <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../about/authors/ title=Authors class=md-nav__link> Authors </a> </li> <li class=md-nav__item> <a href=../../../../about/license/ title=License class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Mathematics <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Mathematics data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Mathematics </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-1 type=checkbox id=nav-6-1> <label class=md-nav__link for=nav-6-1> Exercises <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Exercises data-md-level=2> <label class=md-nav__title for=nav-6-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Exercises </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../mathematics/exercises/cardinal_number_of_finite_power_set/ title="Cardinal Number of Finite Power Sets" class=md-nav__link> Cardinal Number of Finite Power Sets </a> </li> <li class=md-nav__item> <a href=../../../../mathematics/exercises/characterization_bijectivity/ title="Characterization of Bijectivity" class=md-nav__link> Characterization of Bijectivity </a> </li> <li class=md-nav__item> <a href=../../../../mathematics/exercises/convergence_implies_fixed_point/ title="Convergence Implies the Existence of a Fixed Point" class=md-nav__link> Convergence Implies the Existence of a Fixed Point </a> </li> <li class=md-nav__item> <a href=../../../../mathematics/exercises/divisibility_by_133/ title="Divisibility by 133" class=md-nav__link> Divisibility by 133 </a> </li> <li class=md-nav__item> <a href=../../../../mathematics/exercises/orthogonal_invariance_of_laplacian/ title="Invariance of the Laplacian" class=md-nav__link> Invariance of the Laplacian </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#random-numbers-and-the-estimation-of class=md-nav__link> Random Numbers and the Estimation of π </a> </li> <li class=md-nav__item> <a href=#starting-a-new-project-with-other-tools-in-mind class=md-nav__link> Starting a New Project with Other Tools in Mind </a> </li> <li class=md-nav__item> <a href=#lambda-expression-as-simplification class=md-nav__link> Lambda Expression as Simplification </a> </li> <li class=md-nav__item> <a href=#estimating class=md-nav__link> Estimating π </a> </li> <li class=md-nav__item> <a href=#tweaking-the-program class=md-nav__link> Tweaking the Program </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <style type=text/css>
    /* Justify all text paragraphs. */
    p {
      text-align: justify;
      text-justify: inter-word;
    }
    /* Left align all mathematical equations. */
    mjx-container {
      text-align: left!important;
      text-indent: 10%!important;
    }
  </style> <a href=https://github.com/lyrahgames/codeflow/edit/master/docs/programming/c++/course/12.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=12-monte-carlo>12. Monte-Carlo π<a class=headerlink href=#12-monte-carlo title="Permanent link">&para;</a></h1> <p>In the last few sections, we have introduced the tools for a basic toolchain every C++ project will eventually need. But even for a basic toolchain, it seemed to be overwhelming. Hence, we will use the next project to actually get back to rules and learn how to integrate those tools in our workflow without thinking too much about them.</p> <p>For this, we will get our hands on random numbers and in the next lesson on time measurement facilities. It seems to be weird, to use random numbers in a computer program and the question arises, why we would actually care about them. Indeed, the topic of random number generation is not simple. The answer lies again in mathematics. Using probability and complexity theory, it can be shown that algorithms using random numbers are sometimes much more efficient than their deterministic counterparts.</p> <p>Let us get clear on the technical terms. We call an algorithm which somehow uses random numbers a Monte-Carlo algorithm. All other algorithms are called deterministic algorithms. This is based on a simple but powerful observation. Deterministic algorithms will at all times give you the same output for the same input value. On the other hand, every call of a Monte-Carlo algorithm may return a slightly changed end result which approximates the actual solution to a problem.</p> <h2 id=random-numbers-and-the-estimation-of>Random Numbers and the Estimation of π<a class=headerlink href=#random-numbers-and-the-estimation-of title="Permanent link">&para;</a></h2> <p>To get in touch with Monte-Carlo algorithms, we will implement the "Hello, World!" example of randomized algorithms. We will try to estimate <span class=arithmatex>\(\pi\)</span>.</p> <p><img alt src=../../../../assets/images/monte-carlo_pi.png></p> <p>Take a look at the image and consider the upper-right sector of the unit circle. The area <span class=arithmatex>\(A\)</span> of a circle with radius <span class=arithmatex>\(r\)</span> is given by a simple formula.</p> <div class=arithmatex>\[ A = \pi r^2 \]</div> <p>For the upper-right sector of the unit circle, the radius <span class=arithmatex>\(r=1\)</span> and the area is reduced by <span class=arithmatex>\(4\)</span>. As a result, the area of this sector, let us call it <span class=arithmatex>\(A_\circ\)</span>, is then given as follows.</p> <div class=arithmatex>\[ A_\circ = \frac{\pi}{4} \]</div> <p>This formula gives you the feeling that we already know <span class=arithmatex>\(\pi\)</span>. But currently, there is no way to compute the area of the circle. Now, consider the bounding unit square in the image. Obviously, its area is <span class=arithmatex>\(1\)</span>. If there is a routine in our program, like <code class=highlight><span class=n>random</span><span class=p>()</span></code>, which allows us to draw a random number uniformly distributed in the interval <span class=arithmatex>\([0,1]\)</span>, then we can easily generate uniformly distributed random points in the unit square by calling <code class=highlight><span class=n>random</span><span class=p>()</span></code> once for the <span class=arithmatex>\(x\)</span> coordinate of the point and once for the <span class=arithmatex>\(y\)</span> coordinate of the point. Uniformly distributed in this sense means that every possible value has the same probability to be generated. You have to think of the function <code class=highlight><span class=n>random</span><span class=p>()</span></code> as an oracle which magically tells you "the right" random numbers when you ask it.</p> <p>To this point, we have no clue on how to guess the area <span class=arithmatex>\(A_\circ\)</span>. But there is a straightforward characteristic of the circle which can be used. The distance to the origin <span class=arithmatex>\(d\)</span> for every point <span class=arithmatex>\(p\)</span> that lies in the circle has to be smaller than its radius, here <span class=arithmatex>\(1\)</span>. This distance can be computed by the famous Pythagorean theorem.</p> <div class=arithmatex>\[ d = \sqrt{p_x^2 + p_y^2} \]</div> <p>The idea is to count the number <span class=arithmatex>\(n_\circ\)</span> of randomly generated points that lie inside the circle. We will then relate the quotient of the number <span class=arithmatex>\(n_\circ\)</span> of points inside the circle and the whole number <span class=arithmatex>\(n\)</span> of points to the quotient of their respective areas <span class=arithmatex>\(A_\circ\)</span> and <span class=arithmatex>\(A_\square\)</span>. Because the area of the square is <span class=arithmatex>\(1\)</span>, the "equation" would look like the following.</p> <div class=arithmatex>\[ \frac{n_\circ}{n} \stackrel{\sim}{=} \frac{A_\circ}{A_\square} = \frac{\pi}{4} \]</div> <p>Of course, this statement is not a real equation. We are not allowed to construct equations how we would like them to be. But in probability theory, the variable <span class=arithmatex>\(\frac{n_\circ}{n}\)</span> is typically seen as a random variable with an abstract expectation value. To not go into too much details, it can be shown that in a statistical sense for a very large amount of points <span class=arithmatex>\(n\)</span> this variable indeed approaches the value of <span class=arithmatex>\(\frac{\pi}{4}\)</span>. So, for us, this means, we will generate a huge amount of random points in the square and test them if they are lying inside the circle. Getting the number of points inside the circle will then allow us to provide an estimation of <span class=arithmatex>\(\pi\)</span>.</p> <h2 id=starting-a-new-project-with-other-tools-in-mind>Starting a New Project with Other Tools in Mind<a class=headerlink href=#starting-a-new-project-with-other-tools-in-mind title="Permanent link">&para;</a></h2> <p>After this small excursion in the theory of Monte-Carlo methods, let us start a new project. This time, we will directly start with Git.</p> <div class=codehilite><pre><span></span><code>$ git init monte-carlo-pi
$ cd monte-carlo-pi
</code></pre></div> <p>We have created a new repository for our project. This should always be the starting point. But for the next few thoughts, we can forget about Git. We will only use it when we really need it.</p> <p>For nearly all C++ projects, the focus should lie on the development of the C++ code itself. So please, create a <code>main.cpp</code> file.</p> <div class=codehilite><pre><span></span><code>$ touch main.cpp
</code></pre></div> <p>It sounds a little bit silly, but to test if everything on the computer is working fine, let us start AGAIN with a "Hello, World!" program.</p> <p><strong>main.cpp</strong> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp></span>
<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
  <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&quot;Hello, World!</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></p> <p>Compile and run it.</p> <div class=codehilite><pre><span></span><code>$ g++ -o main main.cpp
$ ./main
Hello, World!
</code></pre></div> <p>Let us now start with the generation of random numbers. The header file <code>random</code> of the C++ standard template library already gives us a lots of facilities to generate them.</p> <p><strong>main.cpp</strong> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;random&gt;</span><span class=cp></span>
<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=n>random_device</span> <span class=n>rd</span><span class=p>{};</span>
  <span class=n>mt19937</span> <span class=n>rng</span><span class=p>{</span><span class=n>rd</span><span class=p>()};</span>
  <span class=n>uniform_real_distribution</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>dist</span><span class=p>{</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>};</span>

  <span class=k>const</span> <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span>
    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></p> <p>Now, that is a lot. We will go through every detail but first compile and run the code to make sure there are no typos.</p> <div class=codehilite><pre><span></span><code>$ g++ -o main main.cpp
$ ./main
0.864357
0.523781
0.276156
0.33275
0.397129
0.407622
0.519735
0.187027
0.568677
0.923395
</code></pre></div> <p>When running the program it outputs ten random numbers uniformly distributed in the interval <span class=arithmatex>\([0,1]\)</span>. Hopefully, every time the program is called, different random numbers should appear. This is the typical characteristic of our oracle routine.</p> <p>So, what happens here? For this, we need to understand how the computer is generating random numbers. The process is separated into three stages. The first one attains a so-called seed, an initial value that should be truly random. Truly random means that this value typically results from a chaotic physical process, such as temperature fluctuations. At this point, we could ask why we do even bother with two other stages when we already got a possibility to draw truly random numbers. The true random number generators built into a computer are typically much too slow for Monte-Carlo simulations. Furthermore, there are other reasons why we would not like to have only truly random numbers. In C++, we do this by constructing an object <code>rd</code> of type <code class=highlight><span class=n>random_device</span></code> and by using its function operator.</p> <p>The second stage is a so-called pseudorandom number generator because it computes random numbers based on an algorithm which are then by definition not truly random. But the algorithm is designed to be in some sense unpredictable and to generate a sequence of numbers which is hard to distinguish from a truly random sequence of numbers. And as said before, a pseudorandom number generator can generate "random" numbers much faster. Nevertheless, the pseuderandom number generator uses the truly random seed from the first stage to introduce actual randomness in its own output. But it is expanding this randomness from one value to a whole sequence of values. In C++, one typically uses the Mersenne twister which is de-facto standard of pseudorandom number generators. We construct an object <code>rng</code> of type <code>mt19937</code> and initialize it with a value from <code>rd</code> by calling <code>rd()</code>. At this point, we can forget about <code>rd</code>.</p> <p>Last but not least, we have to consider the third stage. Until now, the random number generators are only working with abstract integer numbers that have nothing in common with real numbers uniformly distributed in <span class=arithmatex>\([0,1]\)</span>. As a consequence, in most cases, we have to use distributions. They are providing a transformation from those abstract integral numbers to our target domain. In C++, many distributions are possible and not only the uniform distribution. But we will only construct an object <code>dist</code> of type <code>uniform_real_distribution&lt;float&gt;</code>. The arguments provide the interval for random numbers. Please note, we do not use any seed value or random number from the other two stages. The distribution has to be applied every time we want to get random numbers from <code>rng</code>. Hence, we construct a random number by calling <code>dist(rng)</code>.</p> <p>Now, we have cleared one goal for our new project: To successfully generate random numbers. Let us seal the deal by making a commit to have a backup if something in the future goes wrong. Currently, there is no need for <code>.gitignore</code> file. Let us only add the newly created <code>main.cpp</code> file.</p> <div class=codehilite><pre><span></span><code>$ git status                        # optional
$ git add main.cpp
$ git status                        # optional
$ git commit -m &quot;Initial commit&quot;
$ git status                        # optional
$ git log                           # optional
</code></pre></div> <p>Again, we have used Git at the right time only for a short moment and are now forgetting about it again. Let us head over to the next part.</p> <h2 id=lambda-expression-as-simplification>Lambda Expression as Simplification<a class=headerlink href=#lambda-expression-as-simplification title="Permanent link">&para;</a></h2> <p>In C++, our current oracle function is not straightforward to use. We have to remember that a distribution, like <code>dist</code>, only transforms a given random number to our target domain. Putting <code>rng</code> in the function operator of <code>dist</code>, we can imagine that <code>dist</code> draws an abstract integral number from <code>rng</code> by using (again) the function operator <code>rng()</code>, performs the according transformation, and outputs the result to the user. As a consequence, we have to generate a new random number by calling <code>dist(rng)</code>. In my opinion, this seems to be a little bit counter-intuitive. To make the code more readable, we would like to use a function, like <code>random()</code>. You already know about functions and therefore you should be able to implement a function with such a property. But there are some peculiarities.</p> <p>Consider the following function implementation. <div class=highlight><pre><span></span><code><span class=kt>float</span> <span class=nf>random</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>return</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> This will definitely not compile because for the function <code>random</code> the variables <code>dist</code> and <code>rng</code> are unknown. So you could to do the following.</p> <div class=highlight><pre><span></span><code><span class=kt>float</span> <span class=nf>random</span><span class=p>()</span> <span class=p>{</span>
  <span class=n>random_device</span> <span class=n>rd</span><span class=p>{};</span>
  <span class=n>mt19937</span> <span class=n>rng</span><span class=p>{</span><span class=n>rd</span><span class=p>()};</span>
  <span class=n>uniform_real_distribution</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>dist</span><span class=p>{};</span>
  <span class=k>return</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <p>This code results in no compiler error but will completely mess up your random number generation process. Remember, we want to construct a variable of type <code>mt19937</code> only once to take advantage of its speed and the properties of its pseudorandom number sequence. The code above not only eradicates all speed advantages by constructing and seeding the pseudorandom number generator all over again every time we call the function. Furthermore, it also destroys all properties of the generated sequence of pseudorandom numbers that make them somehow indistinguishable from truly random numbers.</p> <p>There are of course multiple solutions to this problem. We could define the variables <code>rng</code> and <code>dist</code> in the global namespace of C++.</p> <div class=highlight><pre><span></span><code><span class=n>random_device</span> <span class=n>rd</span><span class=p>{};</span>
<span class=n>mt19937</span> <span class=n>rng</span><span class=p>{</span><span class=n>rd</span><span class=p>()};</span>
<span class=n>uniform_real_distribution</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>dist</span><span class=p>{};</span>
<span class=c1>// ...</span>
<span class=kt>float</span> <span class=nf>random</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>return</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <p>Now, every function can see these variables and therefore it is considered to be a bad solution. Let us think about a more advanced feature of the C++ language to solve this problem. Lambda expressions are unnamed functions with a state which can be defined in any expression. You have to understand them as variables with the type of a function. This is exactly what we need to overcome the global definition problem. We will use a lambda expression inside the <code>main</code> function instead of a global function.</p> <p><strong>main.cpp</strong> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;random&gt;</span><span class=cp></span>
<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=n>random_device</span> <span class=n>rd</span><span class=p>{};</span>
  <span class=n>mt19937</span> <span class=n>rng</span><span class=p>{</span><span class=n>rd</span><span class=p>()};</span>
  <span class=n>uniform_real_distribution</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>dist</span><span class=p>{</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>};</span>

  <span class=k>const</span> <span class=k>auto</span> <span class=n>random</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=p>]()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>);</span> <span class=p>};</span>

  <span class=k>const</span> <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span>
    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>random</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></p> <p>In this code, <code class=highlight><span class=p>[</span><span class=o>&amp;</span><span class=p>]()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>);</span> <span class=p>}</span></code> is the actual lambda expression which defines an in-place function inside the <code>main</code> routine. Because there is there is no name for a lambda expression, another syntax in C++ has to be used. Lambdas are introduced by box brackets <code>[]</code> with no content or some other characters, such as <code>[&amp;]</code> in our case. After those box brackets, we can think of it as every other function definition. In parentheses <code>(</code> and <code>)</code>, we provide the parameters of the function. And in the curly braces <code>{</code> and <code>}</code>, we provide its implementation. The C++ compiler is able to automatically deduce the return of a lambda expression. Therefore no return type is provided at the beginning. The ampersand inside the box brackets means that the state of the lambda expression captures all until this moment defined variables inside the <code>main</code> function. Because of this, the lambda expression knows about <code>rng</code> and <code>dist</code>.</p> <p>Now, there would be one last problem. A function without any name cannot be called by the user but only from the compiler. Accordingly, we use a variable <code>random</code> to explicitly name the lambda expression. Again, the type of <code>random</code> will automatically deduced by the compiler. In the last part of the <code>main</code> routine, we are then able to use <code>random</code> as a function by calling <code>random()</code>.</p> <p>Please, commit the latest changes with Git by the commands given above and provide and appropriate commit message, like "Use lambda expression for random numbers".</p> <h2 id=estimating>Estimating π<a class=headerlink href=#estimating title="Permanent link">&para;</a></h2> <p>After the generation of random numbers, the actual algorithm for estimating <span class=arithmatex>\(\pi\)</span> can directly be implemented.</p> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;random&gt;</span><span class=cp></span>
<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
<span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=n>random_device</span> <span class=n>rd</span><span class=p>{};</span>
  <span class=n>mt19937</span> <span class=n>rng</span><span class=p>{</span><span class=n>rd</span><span class=p>()};</span>
  <span class=n>uniform_real_distribution</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>dist</span><span class=p>{</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>};</span>
  <span class=k>const</span> <span class=k>auto</span> <span class=n>random</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=p>]()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>);</span> <span class=p>};</span>

  <span class=k>const</span> <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>10</span><span class=err>&#39;</span><span class=mo>000</span><span class=err>&#39;</span><span class=mo>000</span><span class=p>;</span>
  <span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>){</span>
    <span class=k>auto</span> <span class=n>x</span> <span class=o>=</span> <span class=n>random</span><span class=p>();</span>
    <span class=k>auto</span> <span class=n>y</span> <span class=o>=</span> <span class=n>random</span><span class=p>();</span>
    <span class=k>auto</span> <span class=n>r2</span> <span class=o>=</span> <span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span> <span class=o>*</span> <span class=n>y</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>r2</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>)</span> <span class=o>++</span><span class=n>c</span><span class=p>;</span>
  <span class=p>}</span>
  <span class=k>auto</span> <span class=n>pi</span> <span class=o>=</span> <span class=mi>4</span> <span class=o>*</span> <span class=kt>float</span><span class=p>(</span><span class=n>c</span><span class=p>)</span> <span class=o>/</span> <span class=kt>float</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
  <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&quot;pi = &quot;</span> <span class=o>&lt;&lt;</span> <span class=n>pi</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>The variable <code>c</code> counts the number of points inside the unit circle. <code>n</code> stands for count of all points. We only compute the squared distance of all points. This makes sure, we do not have to compute the square root. The inequality does not change. Furthermore, we have used integers of type <code class=highlight><span class=kt>int</span></code> to count the amount of points. A division between <code>int</code> means integer division. So, we explicitly transform both integers to a floating-point value of type <code>float</code>.</p> <p>Please, commit the latest changes with Git by the commands given above and provide and appropriate commit message, like "Add Monte-Carlo pi computation".</p> <h2 id=tweaking-the-program>Tweaking the Program<a class=headerlink href=#tweaking-the-program title="Permanent link">&para;</a></h2> <p>No program is ever perfect. But there are now some obvious possibilities to tweak the code slightly.</p> <p><strong>main.cpp</strong> <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;random&gt;</span><span class=cp></span>

<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
  <span class=n>mt19937</span> <span class=n>rng</span><span class=p>{</span><span class=n>random_device</span><span class=p>{}()};</span>
  <span class=n>uniform_real_distribution</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>dist</span><span class=p>{</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>};</span>
  <span class=k>const</span> <span class=k>auto</span> <span class=n>random</span> <span class=o>=</span> <span class=p>[</span><span class=o>&amp;</span><span class=p>]()</span> <span class=p>{</span> <span class=k>return</span> <span class=n>dist</span><span class=p>(</span><span class=n>rng</span><span class=p>);</span> <span class=p>};</span>

  <span class=k>const</span> <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=mi>10</span><span class=err>&#39;</span><span class=mo>000</span><span class=err>&#39;</span><span class=mo>000</span><span class=p>;</span>
  <span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
  <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>){</span>
    <span class=k>const</span> <span class=k>auto</span> <span class=n>x</span> <span class=o>=</span> <span class=n>random</span><span class=p>();</span>
    <span class=k>const</span> <span class=k>auto</span> <span class=n>y</span> <span class=o>=</span> <span class=n>random</span><span class=p>();</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span> <span class=o>*</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>)</span> <span class=o>++</span><span class=n>c</span><span class=p>;</span>
  <span class=p>}</span>
  <span class=k>const</span> <span class=k>auto</span> <span class=n>pi</span> <span class=o>=</span> <span class=mf>4.0f</span> <span class=o>*</span> <span class=n>c</span> <span class=o>/</span> <span class=n>n</span><span class=p>;</span>
  <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&quot;pi = &quot;</span> <span class=o>&lt;&lt;</span> <span class=n>pi</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></p> <p>Every variable, that is initialized when defined and never changed, should typically be declared <code class=highlight><span class=k>const</span></code>. This gives the compiler more freedom to optimize the code.</p> <p>To shorten the code, we can remove explicitly defined temporary variables, like <code>rd</code> and <code>r2</code>. Instead, the code now directly constructs those data inside the expressions.</p> <p>Additionally, the explicit type casting (also type conversion) from <code class=highlight><span class=kt>int</span></code> to <code class=highlight><span class=kt>float</span></code> can removed by relying on a neat trick. The literal <code class=highlight><span class=mi>4</span></code> from the program before introduces a new integer number to the program. Here, we have changed the literal to <code class=highlight><span class=mf>4.0f</span></code> which introduces a <code class=highlight><span class=kt>float</span></code>. Every <code class=highlight><span class=kt>int</span></code> that is multiplied with <code class=highlight><span class=kt>float</span></code> is implicitly converted to <code class=highlight><span class=kt>float</span></code>. The same is true for division, addition, and subtraction.</p> <p>Please, commit the latest changes with Git by the commands given above and provide and appropriate commit message, like "Tweak the code".</p> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 13, 2020</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../11/ title="11. GitHub as Git Hosting Platform" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> 11. GitHub as Git Hosting Platform </div> </div> </a> <a href=../../../../server/nextcloud_with_nginx_reverse_proxy/ title="Set Up Nextcloud with NGINX Reverse Proxy" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Set Up Nextcloud with NGINX Reverse Proxy </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Markus Pawellek </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/lyrahgames target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../../../assets/javascripts/bundle.b39636ac.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=../../../../javascripts/config.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>